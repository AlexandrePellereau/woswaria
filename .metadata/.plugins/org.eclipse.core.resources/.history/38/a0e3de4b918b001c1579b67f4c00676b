package fr.firedragonalex.rankandlevels;

import org.bukkit.Bukkit;
import org.bukkit.entity.Player;
import org.bukkit.event.EventHandler;
import org.bukkit.event.Listener;
import org.bukkit.event.inventory.InventoryClickEvent;
import org.bukkit.inventory.ItemStack;

import fr.firedragonalex.rankandlevels.rank.Rank;

public class ListenerGUI implements Listener{
	
	@EventHandler
	public void onClick(InventoryClickEvent event) {
		Bukkit.broadcastMessage("test1");
		String inventoryTitle = event.getView().getTitle();
		Player player = (Player)event.getWhoClicked();
		ItemStack item = event.getCurrentItem();
		Bukkit.broadcastMessage("test2");
		if (item == null || !item.hasItemMeta()) return;
		Bukkit.broadcastMessage("test3:"+inventoryTitle.split("|"));
		for (int i = 0; i < inventoryTitle.split("|").length; i++) {
			Bukkit.broadcastMessage("test3.1:"+inventoryTitle.split("|")[i]);
		}
		if (inventoryTitle.contains("|") && inventoryTitle.split("|")[0].equals("§1LevelRewards")) {
			Bukkit.broadcastMessage("test4");
			event.setCancelled(true);
			Integer page = Integer.valueOf(inventoryTitle.split("|")[1].split(":")[1]);
			Integer rankNumber = Integer.valueOf(inventoryTitle.split("|")[2].split(":")[1]);
			String itemName = item.getItemMeta().getDisplayName();
			if (itemName.contains("Normal") || itemName.contains("Rare") || itemName.contains("Très rare") || itemName.contains("Epique") || itemName.contains("Légendaire")) {
				
			}
			else if (itemName.equals("Précédent")) {
				Main.GuiLevelRewards(player, (page-1)*7+1, Rank.values()[rankNumber]);
			}
			else if (itemName.equals("Suivant")) {
				Main.GuiLevelRewards(player, (page+1)*7+1, Rank.values()[rankNumber]);
			}
			else if (itemName.equals("Précédent")) {
				
			}
			else if (itemName.equals("Précédent")) {
				
			}
		}
	}
}
